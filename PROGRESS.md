# ECXIA安全管理システム - 進捗管理

**最終更新：2026年2月12日**

---

## 現在のステータス

```
┌─────────────────────────────────────────────────────────────┐
│                                                               │
│   📋 状態: Phase 0（設計・基盤構築）                          │
│                                                               │
│   ⏭️ 次のアクション（優先度順）:                               │
│      1. プロジェクト初期化（pnpm, Vite, React, TypeScript）  │
│      2. Supabase プロジェクト作成・DB構築                     │
│      3. LINE公式アカウント連携設定                            │
│      4. LIFFアプリ基盤構築（ドライバーUI）                   │
│      5. 管理画面基盤構築（Web UI）                            │
│                                                               │
└─────────────────────────────────────────────────────────────┘
```

---

## フェーズ進捗

| Phase | 名称 | 期間 | 状態 | 進捗 |
|-------|------|------|------|------|
| **Phase 0** | 設計・基盤構築 | 2月中旬 | 🔄 進行中 | ██░░░░░░░░ 20% |
| **Phase 1** | コア機能実装 | 2月下旬〜3月中旬 | ⏸️ 未着手 | ░░░░░░░░░░ 0% |
| **Phase 2** | LINE連携・通知 | 3月中旬〜4月上旬 | ⏸️ 未着手 | ░░░░░░░░░░ 0% |
| **Phase 3** | テスト・デプロイ | 4月中旬〜下旬 | ⏸️ 未着手 | ░░░░░░░░░░ 0% |
| **リリース** | 本番運用開始 | 5月 | ⏸️ | ░░░░░░░░░░ 0% |

---

## Phase 0: 設計・基盤構築

### 完了したタスク

- [x] クライアント情報整理（ekutora.com, 議事録, 国交省PDF）
- [x] 市場価格調査・価格戦略策定
- [x] CLAUDE.md 作成（マスターコンテキスト）
- [x] DB設計書作成（docs/06_DATABASE_DESIGN.md - 10テーブル）
- [x] PROGRESS.md 作成（このファイル）

### 未着手タスク

- [ ] プロジェクト初期化（React + TypeScript + Vite + Tailwind）
- [ ] shadcn/ui セットアップ
- [ ] TanStack Query + Router セットアップ
- [ ] 型定義作成（10テーブル）
- [ ] Zodバリデーションスキーマ作成
- [ ] ESLint + Prettier 設定
- [ ] Vitest + Playwright 設定
- [ ] GitHub リポジトリ作成
- [ ] GitHub Actions CI 設定
- [ ] Supabase プロジェクト作成
- [ ] DBマイグレーション実行（10テーブル + RLS）
- [ ] LINE Developers アカウント設定
- [ ] LIFF アプリ作成・設定
- [ ] .env.example 作成

---

## Phase 1: コア機能実装（2月下旬〜3月中旬）

### 目標
- LIFFフォーム4画面 + 管理画面4画面を実装
- データの入力・保存・閲覧が一通りできる状態

### タスク一覧

#### Week 1-2: LIFFフォーム（ドライバーUI）

- [ ] LIFF初期化・LINE Login連携
- [ ] 業務前報告フォーム（出勤打刻 + 点呼項目）
- [ ] 日常点検フォーム（13項目チェックリスト）
- [ ] 業務後報告フォーム（退勤打刻 + 距離・配送先）
- [ ] 事故報告フォーム（写真アップロード含む）
- [ ] 前回値自動セット機能
- [ ] 配送先サジェスト機能
- [ ] フォーム送信後の完了画面
- [ ] 二重送信防止

#### Week 3-4: 管理画面（Web UI）

- [ ] 認証（Supabase Auth - メール/パスワード）
- [ ] ダッシュボード（本日の提出状況一覧）
- [ ] 日報一覧（日付別・ドライバー別フィルタ）
- [ ] 日報詳細表示
- [ ] ドライバー管理（CRUD + LINE紐付け状況）
- [ ] 車両管理（CRUD）
- [ ] 事故報告一覧・詳細
- [ ] CSVエクスポート機能

---

## Phase 2: LINE連携・通知（3月中旬〜4月上旬）

### 目標
- プッシュ通知・リマインド・アラートが自動で動く状態
- リッチメニュー設定完了

### タスク一覧

- [ ] LINE Webhook受信（Edge Function）
- [ ] 友だち追加イベント処理
- [ ] リッチメニュー設定（4ボタン）
- [ ] 朝のリマインド通知（08:00）
- [ ] 未提出アラート（09:30 / 19:00）
- [ ] 管理者サマリー通知（10:00）
- [ ] LINE一斉配信機能（管理画面から）
- [ ] 保存期間管理バッチ（月次）

---

## Phase 3: テスト・デプロイ（4月中旬〜下旬）

### 目標
- テスト完了、本番環境にデプロイ
- ドライバー向けマニュアル作成

### タスク一覧

- [ ] ユニットテスト（サービス層）
- [ ] 統合テスト（LIFF → Supabase）
- [ ] E2Eテスト（主要フロー）
- [ ] Vercel デプロイ設定
- [ ] 本番Supabaseプロジェクト構築
- [ ] 本番LINE公式アカウント設定
- [ ] ドライバー向け操作マニュアル作成
- [ ] 管理者向け操作マニュアル作成
- [ ] エクシア様への納品・説明会

---

## 直近の主な成果

| 日付 | 成果 |
|------|------|
| 2026-02-12 | **CLAUDE.md作成完了！** renkOS準拠のマスターコンテキスト。5原則、4層アーキテクチャ、17項目チェックリスト、4層防御フロー |
| 2026-02-12 | **DB設計書完了！** 10テーブル、法令完全準拠（業務記録・点呼・点検・事故）、RLSポリシー、保存期間管理 |
| 2026-02-12 | **市場価格調査完了！** 市場相場400〜800万円に対して適正価格を策定 |
| 2026-02-12 | **クライアント分析完了！** ekutora.com、議事録、国交省PDF（令和7年4月法改正）を全て確認 |

---

## 開発環境情報

### 技術スタック

**フロントエンド（管理画面）：**
- React 18.x + TypeScript 5.x (Strict)
- Vite 5.x + Tailwind CSS 3.x + shadcn/ui
- TanStack Query 5.x + TanStack Router 1.x
- React Hook Form 7.x + Zod 3.x

**フロントエンド（ドライバーUI）：**
- LIFF SDK v2.x + React + TypeScript

**バックエンド：**
- Supabase（PostgreSQL 15 + Auth + RLS + Storage + Edge Functions）

**LINE連携：**
- LINE Messaging API + LIFF + Rich Menu

**開発ツール：**
- pnpm, ESLint, Prettier, Vitest, Playwright
- GitHub Actions, Vercel

### 開発コマンド（予定）

```bash
pnpm dev          # 開発サーバー起動
pnpm build        # プロダクションビルド
pnpm test         # テスト実行
pnpm test:e2e     # E2Eテスト実行
pnpm lint         # リント実行
pnpm type-check   # 型チェック
```

---

## メモ・注意事項

### 確認が必要な情報

| # | 内容 | 状態 |
|---|------|------|
| 1 | エクシア様のLINE公式アカウント情報 | 未取得 |
| 2 | ドライバーの正確な人数 | 未確認 |
| 3 | 車両台数 | 未確認 |
| 4 | 管理画面アクセスが必要な人数 | 未確認 |
| 5 | 契約金額の最終決定 | 未決定 |

---

**このファイルは毎回の作業開始時・終了時に更新してください。**
